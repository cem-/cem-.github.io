<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>cem - cron SMSing via Google Voice</title>
	<meta name="author" content="Carl Mehner">
<link rel="alternate" type="application/rss+xml" title="RSS"
      href="https://www.cem.me/cem.rss">
    
	<link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAiNJREFUOI2Nks9LVFEcxT/3vjfm+KOZTDAnzUmxZtoUoqFhktAPhBbTrj9AJLBFhC1CSqZdCbaIgnYt3ES0DCvNgqhAiEqJJq0JBx1FR+nNOM5T37zbopkhwhk8q8vhnvO953uP6FIDAI3mXPxMYmrJo9K2pAC00iJzb6f3CzAGJHWgfrp//JE5H29FUVCcRXR4cv3ApeZbrhbPbR04tLG4dhSFRGBVBXxDVQHfJ0D7Xzh943WPGTE6lGWXxMbC7a4Wz10d/pkqhF0V8I0DL0ZEMEdnYlK8v/y0GTE6ALCVBIS+kyfn/HVpIcUWSgmhCQtQ+QxElxo4DsSAn1mytrvpQUn9nrld1eVGmb/yLWBttzQFuEN9Lx+Gro0+AY5lTa21zaaFx197k6GYB/gI5P0yoRSao8I5Hx58fxPwAxdn700E9PKihXRy05m9mH8HtpIH+048lQ6Zmhl4c18rK/rdcL29P3znXVD9XWBBgy1nnWtKOuQy8KwxeMoAIkDI6XX/cta5lwoZCCDhvdLaDWxkuOcAqVmjN/l95UhyZtWHrYS7rWYwb4QREVzLnrM9WB6ZaV7/sXoOYAWUu61maEfVLQQdSCNQACglo8OT5yvPNng756/mzM1oAoBUxDicU2oiTaZI34prdk+kZo2T2EqPjYYvx0bD+UcKbOHQ4vsu+F8BmyKTrxboiH9erFaWLYUUajutspXQXcVmaWPFFPABMP8AmgnNwTEAUpoAAAAASUVORK5CYII="> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link type="text/css" rel="stylesheet" href="cem.css" />
    <script src="cem.js" ></script>	
</head>

<body>


<header>
	<nav>
		<object type="image/svg+xml" data="art/navL.svg" id="navLeft"></object>
    		<object type="image/svg+xml" data="art/navR.svg" id="navRight"></object>
	</nav>
    
	<section id="topTitle">
		<p>&nbsp;</p>
		<a href="https://www.cem.me/index.html">
			<img class=mainLogo src="art/cem.svg" alt="cem.me"/>
		</a><br />
		<h2>carl mehner's blog</h2>
	</section>
</header>


<!-- -above is template for headers and style- -->

<article>
  <header>
	  <h1 class="title"><a href="#">cron Monitoring for IP Address Changes and SMSing via Google Voice</a></h1>
	  <time class="pubdate" datetime="2010-08-13">2010-08-13</time>

  </header>
<p>In the previous post, i mentioned that I would have some uses for the smsme script that I wrote. Here's a script that checks your external IP address against what you have registered in the DNS system, and alerts you when the address changes.</p>
<p>Also, I've included instructions for creating a user cron job to check every hour on the hour.</p>
<code>
------------------------------------------------------------------------<br />
#!/bin/bash<br />
DNS=`nslookup cem.me 8.8.8.8 | grep 'Address: ' | grep -Eo '[0-9\.]+'`<br />
EXTIP=`wget -q -O - http://checkip.dyndns.org | grep -Eo '[0-9\.]+'`<br />
if [ $DNS != $EXTIP ] ;<br />
&nbsp;&nbsp;then<br />
&nbsp;&nbsp; &nbsp;`/home/username/bin/smsme IP CHANGED: $EXTIP`<br />
fi<br />
------------------------------------------------------------------------<br />
</code>

<p>The DNS command goes to Googleâ€™s DNS, pipes the output to search for 'Address:' followed by a space, and then pulls out the IP address.</p>
<p>The EXTIP goes to http://checkip.dyndns.org and parses out your IP</p>
<br />
<p>To create the cron job, create a new file (crontab.&lt;username&gt;.file) and enter in the text below:</p>
<code>0 * * * * /home/&lt;username&gt;/bin/checkip.sh</code>
<br />
<p>This line says (in the 0 * * * *) part to run on the hour (00), every hour (*), every day (*), every month(*), every day of the week(*) and will run our script that we wrote above (/home/&lt;username&gt;/bin/checkip.sh) make sure you replace the &lt;username&gt; part with your username</p>
<br />
<code>
#this allows your user to run cron jobs<br />
sudo su<br />
echo &lt;username&gt; &gt;&gt;/etc/cron.allow<br />
exit<br />
<br />
#set cron<br />
crontab crontab.&lt;username&gt;.file<br />
<br />
#view to confirm<br />
crontab -l<br />
</code>
</article>


<footer>
	<cite>
		<a href='http://cloud.feedly.com/#subscription%2Ffeed%2Fhttp%3A%2F%2Fwww.cem.me%2Fcem.rss' class="feedly"  target='blank'><img id='feedlyFollow' src='art/fd.png' alt='follow me in feedly'></a>
		Copyright &copy; Carl Mehner</cite>
</footer>

</body>
</html>

